<!DOCTYPE html>
<html>
<head>
    <title>Text Analysis</title>
    <link href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
</head>
<body ng-app="app">
<div class="container" ng-controller="TextAnalysisController">
    <h2>Text (English)</h2>
    <textarea cols="40" rows="10"></textarea>
    <p>
        <button ng-click="clear()">Clear</button>
    </p>
    <p>Number of characters: <span ng-bind="chars()"></span></p>
    <p>Number of words: <span ng-bind="words()"></span></p>
    <p>Number of vowels: <span ng-bind="vowels()"></span></p>
    <p>Number of sentences: <span ng-bind="sentences()"></span></p>
    <p>Number of syllables: <span ng-bind="syllables()"></span></p>
    <p>The Flesch Index is <span ng-bind="index()"></span></p>
</div>
<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.3/angular.js"></script>
<script>
    angular.module('app',[]).controller('TextAnalysisController', TextAnalysisController);
    function TextAnalysisController($scope) {
        $scope.message = "";
        var words = 0;
        var vowelsNumber = 0;
        var syllablesNumber = 0;
        var wordsNumber = 0;
        var sentencesNumber = 0;

        $scope.chars = function() {
            return $scope.message.length;
        };
        $scope.words = function() {
            words = $scope.message.split(" ");
            return ($scope.message === '') ? 0 : $scope.message.split(" ").length;
        };
        $scope.vowels = function() {
            vowelsNumber = ($scope.message.match(/[aeiou]/gi) == null) ? 0 : $scope.message.match(/[aeiou]/gi).length;
            return vowelsNumber;
        };
        $scope.sentences = function() {
            sentencesNumber = ($scope.message.match(/[.?:;!]/gi) == null) ? 0 : $scope.message.match(/[.?:;!]/gi).length;
            return sentencesNumber;
        };
        $scope.index = function() {
            if(sentencesNumber > 0) {
                var fleschIndex = 206.835 - 1.015 * (wordsNumber / sentencesNumber) - 84.6 * (syllablesNumber / wordsNumber);
                if(fleschIndex <= 0) {
                    fleschIndex = 0;
                } else if (fleschIndex >= 120) {
                    fleschIndex = 120;
                }
                return fleschIndex.toFixed(3);
            } else {
                return "(at least one sentence required)";
            }

        };
        $scope.clear = function() {
            $scope.message = "";
        };
    }
</script>
</body>
</html>
